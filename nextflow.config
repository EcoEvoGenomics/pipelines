outputDir = "output"
workflow.output.mode = "copy"
process.shell = ["/bin/bash", "-euo", "pipefail"]

profiles {

  standard {
    process.executor = "local"
    podman.enabled = true
    conda.enabled = false
  }

  saga {
    process.executor = "slurm"
    process.clusterOptions = "--account=nn10082k"
    singularity.enabled = true
    singularity.autoMounts = true
    singularity.cacheDir = "work/containers"
    conda.enabled = true
    conda.cacheDir = "work/conda"
  }

}

process {

  withLabel: "ADMIXTURE" {
    container = "quay.io/biocontainers/admixture:1.3.0--0"
    cpus = 8
    memory = 32.GB
    time = 4.h
  }

  withLabel: "BCFTOOLS" {
    container = "quay.io/biocontainers/bcftools:1.22--h3a4d415_1"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "IQTREE" {
    container = "quay.io/biocontainers/iqtree:3.0.1--h503566f_0"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "MAFFT" {
    container = "quay.io/biocontainers/mafft:7.490--hec16e2b_1"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "PLINK" {
    container = "quay.io/biocontainers/plink:1.90b7.7--h18e278d_1"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "NUMPY" {
    container = "quay.io/biocontainers/numpy:2.2.2"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "RBASE" {
    container = "quay.io/biocontainers/r-base:4.4.1"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "REHH" {
    // LINUX-ONLY. Resources allocated internally
    conda = "r-rehh=3.2.2 r-data.table r-r.utils"
  }

  withLabel: "SAMTOOLS" {
    container = "quay.io/biocontainers/samtools:1.19.2--h50ea8bc_1"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "SYSTEM" {
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

  withLabel: "VCFTOOLS" {
    container = "quay.io/biocontainers/vcftools:0.1.16--he513fc3_4"
    cpus = 4
    memory = 16.GB
    time = 4.h
  }

}
